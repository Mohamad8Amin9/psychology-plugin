# سیستم نتایج پیشرفته - Psychology Test Plugin

## 📋 خلاصه
سیستم نتایج پیشرفته یک ویژگی قدرتمند برای پلاگین تست روانشناسی است که امکان محاسبه و نمایش نتایج پیچیده را فراهم می‌کند. این سیستم از منطق شرطی پیشرفته، قالب‌های آماده و انواع مختلف محاسبات پشتیبانی می‌کند.

## 🚀 ویژگی‌های کلیدی

### 1. **انواع محاسبات پیشرفته**
- **جمع ساده امتیازات**: محاسبه ساده مجموع امتیازات هر حرف
- **میانگین وزنی**: محاسبه میانگین وزنی امتیازات
- **محاسبه درصدی**: تبدیل امتیازات به درصد
- **سبک MBTI**: محاسبه نوع شخصیت بر اساس 4 بعد
- **Big Five**: محاسبه پنج عامل شخصیت
- **فرمول سفارشی**: امکان تعریف فرمول‌های ریاضی سفارشی

### 2. **منطق شرطی پیشرفته**
- **بازه امتیاز**: تعریف بازه‌های امتیاز برای نتایج مختلف
- **محاسبه درصد**: شرط‌گذاری بر اساس درصد
- **تعداد حروف**: شرط‌گذاری بر اساس تعداد انتخاب‌های هر حرف
- **شرط‌های سفارشی**: امکان تعریف شرط‌های پیچیده

### 3. **قالب‌های آماده**
- **قالب MBTI**: 16 نوع شخصیت MBTI
- **قالب Big Five**: پنج عامل شخصیت
- **قالب تست هوش**: بازه‌های مختلف IQ
- **قالب شخصیت عمومی**: انواع شخصیت A, B, C, D

### 4. **نمایش نتایج پیشرفته**
- **نمودارهای تعاملی**: نمایش بصری نتایج
- **توضیحات تفصیلی**: توضیحات کامل برای هر نتیجه
- **رنگ‌بندی سفارشی**: امکان تعیین رنگ برای هر نتیجه
- **اشتراک‌گذاری**: امکان اشتراک‌گذاری نتایج

## 📖 راهنمای استفاده

### مرحله 1: تنظیم نوع محاسبه
1. به بخش "تست روانشناسی" بروید
2. تست مورد نظر را ویرایش کنید
3. به تب "📊 نتایج آزمون" بروید
4. در بخش "محاسبات"، نوع محاسبه را انتخاب کنید

### مرحله 2: تعریف شرایط
1. به تب "شرایط" بروید
2. روی "افزودن شرط جدید" کلیک کنید
3. نوع شرط را انتخاب کنید
4. مقادیر و عملگرها را تنظیم کنید
5. عنوان و توضیحات نتیجه را وارد کنید

### مرحله 3: استفاده از قالب‌های آماده
1. به تب "قالب‌ها" بروید
2. قالب مورد نظر را انتخاب کنید
3. روی "اعمال قالب" کلیک کنید
4. قالب به صورت خودکار تنظیمات را اعمال می‌کند

## 🔧 انواع محاسبات

### جمع ساده امتیازات
```
نتیجه = مجموع امتیازات هر حرف
مثال: A=15, B=12, C=8 → A برنده
```

### میانگین وزنی
```
نتیجه = مجموع امتیازات / تعداد سوالات
مثال: A=15/5=3, B=12/5=2.4 → A برنده
```

### محاسبه درصدی
```
نتیجه = (امتیاز / کل امتیازات ممکن) × 100
مثال: A=15/20×100=75% → 75%
```

### سبک MBTI
```
4 بعد: E/I, S/N, T/F, J/P
نتیجه: ترکیب 4 حرف (مثل INTJ)
```

### Big Five
```
5 عامل: O, C, E, A, N
نتیجه: درصد هر عامل
```

### فرمول سفارشی
```
مثال: (A_score * 0.4) + (B_score * 0.3) + (C_score * 0.3)
```

## 🎯 مثال‌های کاربردی

### مثال 1: تست شخصیت MBTI
```
نوع محاسبه: سبک MBTI
شرایط: 16 شرط برای هر نوع شخصیت
نتیجه: نمایش نوع شخصیت + نمودار ابعاد
```

### مثال 2: تست هوش
```
نوع محاسبه: درصدی
شرایط: 
- 130+ = بسیار باهوش
- 120-129 = باهوش
- 110-119 = بالاتر از متوسط
- 90-109 = متوسط
- 80-89 = پایین‌تر از متوسط
- 70-79 = مرزی
- <70 = نیاز به توجه ویژه
```

### مثال 3: تست استرس
```
نوع محاسبه: جمع ساده
شرایط:
- 0-10 = استرس کم
- 11-20 = استرس متوسط
- 21-30 = استرس بالا
- 31+ = استرس بسیار بالا
```

## 📊 ساختار دیتابیس

### جدول نتایج
```sql
CREATE TABLE wp_psychology_test_results (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    test_id BIGINT UNSIGNED NOT NULL,
    user_id BIGINT UNSIGNED DEFAULT NULL,
    answers LONGTEXT NOT NULL,
    calculated_result LONGTEXT NOT NULL,
    final_result LONGTEXT NOT NULL,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);
```

## 🎨 شخصی‌سازی

### رنگ‌بندی نتایج
- هر نتیجه می‌تواند رنگ مخصوص خود را داشته باشد
- رنگ‌ها در نمودارها و نمایش نتایج استفاده می‌شوند

### توضیحات سفارشی
- امکان نوشتن توضیحات کامل برای هر نتیجه
- پشتیبانی از HTML برای فرمت‌بندی

### صفحه نمایش نتیجه
- امکان انتخاب صفحه خاص برای نمایش نتایج
- پشتیبانی از shortcode در صفحات مختلف

## 🔒 امنیت

### محافظت از داده‌ها
- استفاده از nonce برای AJAX requests
- اعتبارسنجی ورودی‌ها
- محافظت در برابر SQL injection

### دسترسی کاربران
- ذخیره نتایج با شناسه کاربر
- امکان مشاهده تاریخچه نتایج
- محافظت از حریم خصوصی

## 🚀 ویژگی‌های آینده

### در حال توسعه
- [ ] نمودارهای پیشرفته‌تر (Chart.js)
- [ ] گزارش‌گیری آماری
- [ ] مقایسه نتایج کاربران
- [ ] سیستم امتیازدهی و رتبه‌بندی
- [ ] اعلان‌های ایمیل
- [ ] API برای دسترسی خارجی

### پیشنهادات
- [ ] پشتیبانی از تست‌های چندمرحله‌ای
- [ ] سیستم مشاوره هوشمند
- [ ] تحلیل روند نتایج
- [ ] پشتیبانی از زبان‌های مختلف

## 🐛 عیب‌یابی

### مشکلات رایج
1. **نتایج نمایش داده نمی‌شود**
   - بررسی تنظیمات محاسبه
   - بررسی شرایط تعریف شده
   - بررسی console مرورگر

2. **خطا در محاسبه**
   - بررسی فرمول سفارشی
   - بررسی امتیازات سوالات
   - بررسی نوع محاسبه

3. **قالب‌ها کار نمی‌کنند**
   - بررسی JavaScript
   - بررسی CSS
   - بررسی console مرورگر

### لاگ‌ها
- خطاها در console مرورگر ثبت می‌شوند
- خطاهای PHP در error log ثبت می‌شوند

## 📞 پشتیبانی

برای گزارش مشکلات یا پیشنهادات:
- ایمیل: support@example.com
- تلفن: 021-12345678
- وب‌سایت: https://example.com/support

---

**نسخه:** 1.0.0  
**تاریخ انتشار:** 2024  
**توسعه‌دهنده:** محمدامین میرحیدری
